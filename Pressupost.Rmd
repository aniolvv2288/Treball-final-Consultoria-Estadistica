---
title: "Planificaci√≥ del projecte"
author:
  - "Aniol Vilamala Vidal (1665797)"
  - "√àric Segon Salmer√≥n (1672984)"
  - "Jordi Anguera Costa (1673351)"
  - "Daniel Jim√©nez L√≥pez (1671067) "
date: "2025-12-16"
output: pdf_document
---

```{r setup, include=FALSE}
knitr::opts_chunk$set(echo = TRUE)
```

# Descripci√≥ del projecte

Aquest document descriu la planificaci√≥ temporal i pressupost√†ria del projecte estad√≠stic, amb l‚Äôobjectiu de facilitar el seguiment i l‚Äôexecuci√≥ del treball.
El projecte es basa en l‚Äôan√†lisi de dades censals agregades amb l‚Äôobjectiu de desenvolupar diferents models estad√≠stics de car√†cter explicatiu que permetin analitzar i comprendre els resultats electorals observats en les diverses unitats censals al llarg de diferents processos electorals i anys.
Per dur a terme aquest an√†lisi, s‚Äôincorporaran variables socioecon√≤miques, amb especial atenci√≥ als indicadors relacionats amb la renda i altres factors que influeixen en les condicions de vida de la poblaci√≥. Aquestes variables s‚Äôutilitzaran com a factors explicatius del comportament electoral, permetent avaluar la seva relaci√≥ amb l‚Äôevoluci√≥ dels resultats en el temps i entre territoris.
L‚Äôenfocament de l‚Äôestudi ser√† principalment explicatiu, orientat a identificar patrons i associacions rellevants entre les caracter√≠stiques socioecon√≤miques dels censos i els resultats electorals, aix√≠ com a realitzar comparacions entre diferents per√≠odes temporals sempre que la disponibilitat de dades ho permeti.

# Pressupost

```{r,warning=FALSE,echo=FALSE,message=FALSE}
library(knitr)
library(kableExtra)
library(dplyr)

# Taula de pressupost
pressupost <- tibble(
  Fase = c(
    "1. Recerca pr√®via sobre el tema",
    "2. Preparaci√≥ i integraci√≥ de dades",
    "3. An√†lisi descriptiva i explorat√≤ria",
    "4. Modelitzaci√≥ estad√≠stica prim√†ria",
    "5. Modelitzaci√≥ estad√≠stica secund√†ria (avan√ßada)",
    "6. Interpretaci√≥, visualitzaci√≥ i validaci√≥",
    "7. Redacci√≥ de l‚Äôinforme i presentaci√≥"
  ),
  Hores = c(12, 18, 25, 25, 20, 20, 20),
  Tarifa = c(90, 100, 120, 130, 150, 120, 120),
  Cost = c(1080, 1800, 3000, 3250, 3000, 2400, 2400)
) %>%
  mutate(
    `Hores dedicades` = paste0(Hores, " h"),
    `Tarifa aplicada` = paste0(Tarifa, " ‚Ç¨ / h"),
    `Cost total` = paste0(format(Cost, big.mark = ".", decimal.mark = ","), " ‚Ç¨")
  ) %>%
  select(
    Fase,
    `Hores dedicades`,
    `Tarifa aplicada`,
    `Cost total`
  )

# Afegir fila de totals
pressupost_final <- bind_rows(
  pressupost,
  tibble(
    Fase = "TOTAL PROJECTE",
    `Hores dedicades` = paste0(sum(c(12,18,25,25,20,20,20)), " h"),
    `Tarifa aplicada` = "",
    `Cost total` = paste0(
      format(sum(c(12,18,25,25,20,20,20) * c(90,100,120,130,150,120,120)),
             big.mark = ".", decimal.mark = ","),
      " ‚Ç¨"
    )
  )
)
```

```{r,warning=FALSE,echo=FALSE,message=FALSE}
# Taula final
kable(
  pressupost_final,
  format = "latex",
  align = c("l", "c", "c", "c"),
  caption = "{Pressupost orientatiu del projecte (3‚Äì4 setmanes ¬∑ equip de 4 estad√≠stics)}",
) %>%
  kable_styling(
    latex_options = "hold_position",
    bootstrap_options = c("striped", "hover", "condensed"),
    full_width = FALSE,
    position = "center",
    font_size = 14
  ) %>%
  row_spec(0, bold = TRUE) %>%
  row_spec(nrow(pressupost_final), 
            bold = TRUE, 
            background = "#F2F2F2",
            extra_css = "border-top: 2px solid #999;")

```

```{r timeline_pro, echo=FALSE, message=FALSE, warning=FALSE}
library(ggplot2)
library(dplyr)
library(stringr)
# Datos
fases <- tibble(
  fase = c(
    "Recerca pr√®via",
    "Preparaci√≥ i integraci√≥ de dades",
    "An√†lisi descriptiva i explorat√≤ria",
    "Modelitzaci√≥ estad√≠stica prim√†ria",
    "Modelitzaci√≥ estad√≠stica secund√†ria",
    "Interpretaci√≥, visualitzaci√≥ i validaci√≥",
    "Redacci√≥ de l'informe i presentaci√≥"
  ),
  hores = c(12, 18, 25, 25, 20, 20, 20),
  tipus = c(
    "Planificaci√≥",
    "Planificaci√≥",
    "An√†lisi",
    "Modelitzaci√≥",
    "Modelitzaci√≥",
    "Validaci√≥",
    "Comunicaci√≥"
  )
) %>%
  mutate(
    inici = cumsum(lag(hores, default = 0)),
    fi = inici + hores,
    fase_num_raw = paste0(row_number(), ". ", fase),
    fase_num = factor(
    str_wrap(fase_num_raw, width = 30),                 # üëà salto de l√≠nea
    levels = rev(str_wrap(fase_num_raw, width = 30))
))

# Separadores de semanas (40 h por semana)
setmanes <- seq(40, 120, by = 40)

ggplot(fases) +
  # L√≠neas de semanas
  geom_vline(xintercept = setmanes,
             linetype = "dashed",
             color = "grey70") +
  
  # Barras de fases
  geom_segment(aes(x = inici, xend = fi,
                   y = fase_num, yend = fase_num,
                   color = tipus),
               linewidth = 7,
               linecap = "round") +
  
  # Horas dentro
  geom_text(aes(x = (inici + fi)/2,
                y = fase_num,
                label = paste0(hores, " h")),
            color = "white",
            size = 4,
            fontface = "bold") +
  
  scale_color_manual(
    values = c(
      "Planificaci√≥" = "#1B9E77",
      "An√†lisi" = "#7570B3",
      "Modelitzaci√≥" = "#D95F02",
      "Validaci√≥" = "#E7298A",
      "Comunicaci√≥" = "#66A61E"
    )
  ) +
  
  scale_x_continuous(
    breaks = seq(0, 140, by = 20),
    expand = c(0, 0),
    name = "Hores acumulades del projecte"
  ) +
  
  labs(
    title = "Planificaci√≥ temporal del projecte",
    subtitle = "Distribuci√≥ d'hores per fase",
    color = "Tipus de fase"
  ) +
  guides(
  color = guide_legend(nrow = 2, byrow = TRUE)
)+
  
  theme_minimal(base_size = 13) +
  theme(
    panel.grid.major.y = element_blank(),
    panel.grid.minor = element_blank(),
    axis.title.y = element_blank(),
    legend.position = "bottom",
    plot.title = element_text(face = "bold"),
    plot.subtitle = element_text(color = "grey30")
  )

```

